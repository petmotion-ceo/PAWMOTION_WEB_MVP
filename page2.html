<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <!-- user-scalable=no 로 모바일에서 줌 불가 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Mobile Layout with Local Fonts - Page 2</title>

  <style>
    /* Pretendard 폰트 (생략 가능) */
    @font-face {
      font-family: 'Pretendard';
      src: url('fonts/Pretendard-Light.ttf') format('truetype');
      font-weight: 300;
      font-style: normal;
    }
    @font-face {
      font-family: 'Pretendard';
      src: url('fonts/Pretendard-Medium.ttf') format('truetype');
      font-weight: 500;
      font-style: normal;
    }
    @font-face {
      font-family: 'Pretendard';
      src: url('fonts/Pretendard-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }

    /* 
      1) html, body를 100% 차지 + 스크롤 없애고 
         flex로 가운데 정렬 => 레터박스(주변 공백) 가능
    */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      background: #F0F0F0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /*
      2) .frame-wrapper가 원본 402×874 크기 
         => 기기가 이보다 작으면 축소, 크면 주변에 여백(레터박스)
         방법:
         - (A) 고정 폭/높이 삭제하고 aspect-ratio 쓰는 법
         - (B) 미디어쿼리로 width/height 동적으로 조절
         여기서는 (B) 방법 예시
    */
    .frame-wrapper {
      /* 기본: 원본 크기 */
      width: 402px;
      height: 874px;
      background: #FFFFFF;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }

    /*
      3) 기기가 세로로 작거나 가로로 좁을 경우, 
         둘 중 더 작은 비율로 축소 -> letterbox/pillarbox 효과.
    */
    @media (max-aspect-ratio: 402/874) {
      /* 
        기기가 더 '세로로 길고 가로로 좁음' => 가로 풀로 맞추고 세로는 그 비율만큼 
      */
      .frame-wrapper {
        width: 100vw; 
        height: calc(100vw * (874 / 402));
      }
    }
    @media (min-aspect-ratio: 402/874) {
      /* 
        기기가 더 '가로로 넓고 세로가 짧음' => 세로 풀로 맞추고 가로는 그 비율만큼 
      */
      .frame-wrapper {
        height: 100vh;
        width: calc(100vh * (402 / 874));
      }
    }

    /* ----- 이하 기존 스타일 (버튼, 레이블 등) ----- */
    .gender-btn {
      flex: 1;
      margin: 0 5px;
      padding: 10px;
      border: 0.5px solid black;
      border-radius: 4px;
      background: white;
      font-family: Pretendard;
      font-weight: 500;
      font-size: 16px;
      cursor: pointer;
    }
    .gender-btn.active {
      background: #208FFF;
      color: white;
      border: 0.5px solid #208FFF;
    }

    .age-btn {
      flex: 1;
      margin: 0 5px;
      padding: 10px;
      border: 0.5px solid black;
      border-radius: 4px;
      background: white;
      font-family: Pretendard;
      font-weight: 500;
      font-size: 14px;
      cursor: pointer;
    }
    .age-btn.active {
      background: #208FFF;
      color: white;
      border: 0.5px solid #208FFF;
    }

    .name-input, .gender-input, .age-input {
      width: 368px;
      border: 0.5px solid black;
      border-radius: 4px;
      padding: 14px;
      font-size: 16px;
      font-family: Pretendard;
      font-weight: 300;
      color: black;
      background: white;
      box-sizing: border-box;
      transition: transform 0.5s ease, opacity 0.5s ease;
      margin-bottom: 20px; /* 아래 여백 */
    }

    #stepContainer .name-label,
    #stepContainer .gender-label,
    #stepContainer .age-label {
      margin-bottom: 5px;
    }

    .slide-down {
      transform: translateY(50px);
      opacity: 0;
    }
    .header-slide-out {
      transform: translateY(-20px);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .header-slide-in {
      transform: translateY(0);
      opacity: 1;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    #stepContainer .gender-container,
    #stepContainer .age-container {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 20px;
    }

    #page2Header {
      position: absolute;
      top: 77px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      color: black;
      font-size: 20px;
      font-family: Pretendard;
      font-weight: 700;
      line-height: 32px;
      width: 100%;
      max-width: 370px;
    }

    .terms-container {
      display: flex;
      align-items: center;
      margin-top: 180px;
      margin-bottom: 20px;
    }
    .terms-checkbox {
      margin-right: 10px;
    }
    .terms-text {
      font-family: Pretendard;
      font-weight: 300;
      font-size: 12px;
      color: #666;
      line-height: 18px;
      text-align: left;
    }
  </style>
</head>

<body>
  <!-- (A) .frame-wrapper가 페이지2 전체 영역 -->
  <div class="frame-wrapper" id="page2">
    <!-- 기존 402×874 안에 들어갈 콘텐츠 -->
    <div style="width:402px; height:874px; position:relative;">
      <div style="position:absolute; top:54px; left:0; width:402px; height:48px; background:white;"></div>
      <!-- Header -->
      <div id="page2Header">
        반가워요!<br/>아이의 이름이 무엇인가요?
      </div>
      <!-- Previous button -->
      <div id="prevBtn" style="position:absolute; left:17px; top:795px; width:82px; height:35px; padding:1px 46px; background:white; border-radius:8px; border:0.5px solid black; display:flex; justify-content:center; align-items:center; cursor:pointer;"
           onclick="prevStep()">
        <div style="color:black; font-size:16px; font-family:Pretendard; font-weight:500;">이전</div>
      </div>
      <!-- Next button -->
      <div id="nextBtn" style="position:absolute; left:209px; top:795px; width:82px; height:35px; padding:1px 46px; background:#208FFF; border-radius:8px; display:flex; justify-content:center; align-items:center; cursor:pointer;"
           onclick="nextStep()">
        <div style="color:white; font-size:16px; font-family:Pretendard; font-weight:500;" id="nextBtnText">다음</div>
      </div>
      <!-- Step Container -->
      <div id="stepContainer" style="position:absolute; left:16px; top:193px; width:370px;">
        <!-- Step 1: 이름 입력 -->
        <input type="text" id="childName" placeholder="살콩이" class="name-input">
      </div>
      <div id="nameWarning" style="position:absolute; left:16px; top:248px; color:red; font-size:12px; display:none;">
        아이 이름을 입력해주세요!
      </div>
    </div>
  </div>

  <script>
    /* 
      이하 기존 JavaScript 로직 
      (이름/성별/나이/확인 단계 전환) 
    */
    var currentStep = 1;
    var selectedGender = "";
    var selectedAge = "";
    var termsAgreed = false;
    const childNameInput = document.getElementById("childName");
    const stepContainer = document.getElementById("stepContainer");
    const page2Header = document.getElementById("page2Header");
    const nextBtnText = document.getElementById("nextBtnText");
    const nameWarning = document.getElementById("nameWarning");
    const nextBtn = document.getElementById("nextBtn");

    function validateName() {
      if (childNameInput.value.trim() === "") {
        nameWarning.style.display = "block";
        nextBtn.style.pointerEvents = "none";
        nextBtn.style.opacity = "0.5";
      } else {
        nameWarning.style.display = "none";
        nextBtn.style.pointerEvents = "auto";
        nextBtn.style.opacity = "1";
      }
    }
    childNameInput.addEventListener("input", validateName);
    validateName();

    function updateTicketButtonState() {
      if (currentStep === 4) {
        if (termsAgreed) {
          nextBtn.style.pointerEvents = "auto";
          nextBtn.style.opacity = "1";
        } else {
          nextBtn.style.pointerEvents = "none";
          nextBtn.style.opacity = "0.5";
        }
      }
    }

    function nextStep() {
      if (currentStep === 1) {
        if (childNameInput.value.trim() === "") return;
        page2Header.classList.add("header-slide-out");
        setTimeout(() => {
          page2Header.innerHTML = "아이 성별은 무엇인가요?";
          page2Header.classList.remove("header-slide-out");
          page2Header.classList.add("header-slide-in");
          nextBtnText.textContent = "다음";

          const nameInput = stepContainer.querySelector(".name-input");
          nameInput.classList.add("slide-down");
          setTimeout(() => {
            stepContainer.innerHTML = "";
            // 성별 선택 ...
            /* 이하 동일 */
          }, 500);
        }, 300);
      } 
      /* ... 이하 동일 로직 ... */
    }

    function prevStep() {
      /* ... 이전 스텝으로 돌아가는 로직 ... */
    }
  </script>
</body>
</html>
